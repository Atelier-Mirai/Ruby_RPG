---
title: "第四章 コンピュータの仕組み"
free: true
published: true # falseだと下書き
published_at: 2023-12-14 06:00
---

## 二進数 と 十六進数

「みっくん。二進数って知ってる？」
「にしんすう？ ってな〜に？」
「二進数はコンピュータの内部で使われている位取りだよ。わたしたちの指は十本あるわよね。なので、ときに、指を折りながら１、２、３と数えるわよね。そして９まで数え終わったら、１０と位が上がるわ。そして、１１、１２・・・９８、９９と数えていって、１００とまたくらいが上がるわよね。百の位、十の位、一の位とそれぞれの位の重みが十倍違うわよね。これが十進数よ。例えば２１６なら、$2 \times 10^{2} + 1 \times 10^{1} + 6 \times 10^{0}$ のことね。」
「うん、そうだね。小学校の時に習ったよ。百円玉と十円玉、一円玉を使って練習したよ。」
「ええ、そうね。では二進数に移るわね。十進数は上の位の重みが下の位の重みの十倍となっていたわ。二進数は上の位の重みが下の位の重みの二倍になるの。わたくしたちの指は十本あるので、十種類の区別ができるけれども、コンピュータは、電気が流れている、流れていないの二種類の区別なので、二つ集まると上の位に上がっていくの。」
「あ〜、そうなんだ。二進数だと、どうやって数えていくの？」
「0は電気が流れていない状態ね位が電気が流れている状態だわ。0, 1と来て2と行きたいところなんだけれど、一桁で表せるのは0と1だけなので、上の位に繰り上がるの。だから10(いちぜろ)となるわ。そして1つ増やすと11（いちいち）、もう一つ増やしたいのだけれど、上の位に繰り上がって、さらに繰り上がりがあって、100（いちぜろぜろ）となるわ。そして1つ増やして101（いちぜろいち）こんな感じね。」
「そんな感じになるんだ〜。」
「そうだよ。じゃあ、みっくん、続きを言ってみて。」
「えーと101だから次は1つ増やしたいんだけれど、繰り上がるから110、そして1を足して111、そしてさらに1つ増やすんだけれど、繰り上がって繰り上がって繰り上がるから1000になるよ。そして一つ増えると1001で、もう一つ増やして1010。こんな感じになるんそうだね。二進数わかったよ。」
「みっくん、ばっちりね。」

「じゃあ、ちなみに未来が最後に数えた1010だけど、これって十進数にするといくつの数のこと？」
「うーんと、1010だから、先頭の1は、2の3乗だから、$2^{3}が1つと、そして$2^{1}乗が1つだから、合わせて $8+2$ だから $10$ のことかな。」
「正解。しっかりつかんでいるね。素敵よ。」
「思うんだけれど、二進数だとすごく桁数が増えていくよね。1010くらいならまだわかるけれど、もう少し数が増えると一体幾つの数なのか、分からなくなりそう。」
「ええ、そのとおり。なので二進数4桁を一まとめにした16進数と言うものもあるわ。」
「そうなんだ。それはどういうふうになっているの？」
「2の4乗が16だから4桁でまとまりになるの。16進数だから16個集まったら上の位に進むわ。0, 1, 2, ... , 8, 9。ここまで来たら十と言う値を表す一桁の記号が欲しいの。★でも♡でもいいの。コンピュータの初期にはいろんな記法が考えられたけれども、今ではアルファベットAをつかうわ。十の代わりにAを、十一の代わりにBという感じ。C, D, E, Fと進んで、そして上の繰り上がって10（いちぜろ）となるわ。これが対応表よ。」
![](https://storage.googleapis.com/zenn-user-upload/26c4124a9aeb-20231214.png)

「二進数だとすごく桁が増えていったけれど、これなら少なく納まるね。」
「ええ、そうね。そして、もう一つ、今度は216という十進数の数を二進数にして欲しいのだけれど、どうしたらいいかしら？」
「え〜っと。二進数は上の位に進んでいくと、その重みが２、４、８、１６、３２、６４、１２８と倍々になっていくから、１２８が含まれているか調べて、含まれていたら、１２８の位を１にする。そして２１６から１２８を引いた残りの数は９８だから、６４が含まれているので、６４の位を１にする。で６４を引くと３４になるから、３２の位を１にして、残りは２だから２の位を１にする。なので、１１１０００１０だ！」
「みっくん、正解よ。基数変換というのだけれど、もうばっちりね♡」
![](https://storage.googleapis.com/zenn-user-upload/d37bb7bbe269-20231214.png)

## 真理値表

「じゃあ、どんなふうにコンピューターの中で計算するのか見ていこうね。二進数の計算だけれど、足し算や引き算、小学校の時に筆算をやったのを覚えている？ 二進数も同じように筆算するとできるわ。0, 1 の次に2ではなく繰り上がって10になることに注意して筆算してね。」
「うん、わかった。」
「じゃあ、次ね。コンピュータの中ではどんなふうに計算するのだと思う？」
「う〜ん、コンピュータは筆算はできないだろうし・・・ 一体どうやって計算しているの？」
「論理積、論理和、論理否定が基本となるの。２００年くらい前のイギリスにジョージ・ブールという数学者がいたの。そして彼はブール代数というのだけれど、0と1からなる数学を作り上げたわ。論理積は掛け算、論理和は足し算に相当するわ。そして否定演算があるのよ。」
「そうなんだね。普通の数学とはどう違うの？」
「ええ、普通の普通の数学の世界だと、たくさんの数が存在するけれども、このブール代数の世界には0と1だけなの。条件が成り立つなら1、成り立たないなら0。そういうとてもシンプルな世界ね。」
「すごく簡単だね。」
「ええ、そのとおり。1のことを真（しん）、0のことを偽（ぎ）ともいうわ。なので、このブール代数の世界での演算結果の表のことを、真理値表（しんりち）ともいうわ。ちょうど掛け算九九の表のようなものね。」
「そうなんだね。どのような表になるの？」
「ええ、三つの演算があるのだけれど、0と1の二つの数だけが登場するから、とっても簡単な表になるわ。」
「一覧表は、こんな感じね。」
![](https://storage.googleapis.com/zenn-user-upload/381344fcdf9f-20231214.png)

「左側が真理値表、真ん中はMIL記号といって回路図の記号、右端はベン図といって含まれているかいないかを考える時に便利な図なの。まずは論理積ね。論理積は次のようになるわ。」
「Aが0で、Bも0の時、A×Bは0 普通の計算と同じね。」

「次は論理和。論理和も普通の計算と同じように見えるのだけれど、最後に着目して欲しいわ。」
「Aが1で、Bも1の時、A+Bは1 え〜 1+1=2じゃなくて1なのって思うかもしれないけれど、そうなの。
この世界には、0と1しかないから、1+1=1なの。びっくりよね」

「例えばとある施設の入場料を考えて欲しいの。この施設ではお年寄りや障碍者に優しい福祉を謳っているわ。なので、お年寄りや障碍者は入場料無料なの。」
「この施設にみっくんやあたしが入る時にはお金を払うわよね。」
「うん、そうだね。」
「じゃあ、お年寄りの人ならどうかしら。割引条件に該当するかどうかを考えたいのだけれど、Aはお年寄りという条件よ。お年寄りと言う条件に該当したら1、該当しなかったら0になるわ。Bは障碍者かどうか。障碍者と言う条件に該当したら1、該当しなかったら0になるわ。」
「うん、わかった。」
「すると、1+1と言うのは、お年寄りかまたは障碍者かということを意味するわ。すると、お年寄りであって、そして障碍者である人はもちろん条件を満たして無料になるわよね。だから1+1 = 1と言うことになるわ。」
「今までの常識と違っていて、最初はびっくりするけれど、こう考えると筋道が通っているでしょう。こうやって、ブールさんは、ブール代数という独自の世界を切り拓いたの。そしてコンピュータの基本演算として、大活躍しているわ。」
「すごい人なんだね〜」
「ええ、そうね。みっくんもいつの日か素晴らしいプログラムを作って、楽しませてね」
「うん！」
「そして、最後の否定は簡単よ。そうでは無いと言うことになるわ。」
「真理値表、MIL記号、ベン図、押さえておきたい基本だから、よく確認して理解してね。」

## 三つの論理素子 AND回路、OR回路、NOT回路

「真理値表とMIL記号は紹介したのだけれど、MIL記号で表される回路を実際に構成すると、次のようになるわ。」

![](https://storage.googleapis.com/zenn-user-upload/f16cbbb474af-20231214.png)
![](https://storage.googleapis.com/zenn-user-upload/8f7ad3d8e8af-20231214.png)
![](https://storage.googleapis.com/zenn-user-upload/14e50ad4c273-20231214.png)

「AND回路とOR回路はダイオードと呼ばれる素子を使うと実現できるわ。ダイオードは整流素子も呼ばれるけれど、一方向にしか電流を流さない特性を持つの。縦棒と三角の組み合わせでできている記号であらわられているのだけれど、わかる？」
「うん、これのこと？」
「ええ、そうね。図の通り、三角の方向に向かっては電気を流すことができるけれど、逆方向からはちょうど縦に棒が引かれているでしょう。電気を流さないストッパーの役割になるの。だから三角と縦棒を組み合わせた記号になっているの。」
「わかりやすい記号だね。」
「ええ、そうね。じゃあ、今 V のところに 5ボルトの電圧をかけて、Aには5ボルト、Bは0ボルトだったら、Xは何ボルトになるかしら？」
「え〜と、電気は、電圧の高いところから低いところに流れるから、VからBに流れる。だから、X は 0ボルトになるよ。」
「ええ、正解よ。Xの電圧は0ボルト、つまり入力Aが1で、入力Bが0なら、出力Xは0と言うことね。1×0=0になっているわよね。」
「うん、ほんとだ。」
「他の組み合わせもいろいろやってみて。AND回路とOR回路になっていることがわかると思うわ。」
「うん、やって見る。」

「じゃあ、最後のNOT回路なんだけれど、NOT回路はトランジスタと言う素子を使って実現するわ。トランジスタは電流を増幅する機能を持っているの。」

「へ〜、そうなんだ。」

「ええ、トランジスタには、ベースとエミッタとコレクタと言う、3つの足が出ているの。これがトランジスタの写真よ。」
![](https://storage.googleapis.com/zenn-user-upload/91406cbddd32-20231214.jpg)

「大きさは5mmくらいかしら。そしてそれぞれの足に回路を繋ぐのね。電子の流れが電流だってことは理科で習ったと思うのだけれど、ベースは土台、トランジスタでは電流を制御する門番の役割を果たすわ。エミッタは電子を放出する側で、コレクターは切手を集めたりなど、いろんないろんなものを集めたりする人のことをコレクターって言うけれど、ここでは電子を集める人のことね。」
「うんうん。」
「ベースの門番の門を開けたり閉めたりすることで、エミッタからコレクタに流れる電流を大きくしたり小さくしたりすることができるの。ベースの小さな電流でコレクタに流れる大電流を制御できるの。これが増幅の原理ね。」
「うん。」
「ということで、NOT回路なんだけれど、Vが5ボルトでAが0ボルトの時、Xは何ボルトになるのか、Vが5ボルトでAが5ボルトの時、Xは何ボルトになるのか、追ってみてみて。」
「うん。やって見る」
「ええ、そして今説明したAND回路、OR回路、NOT回路を組み合わせることで、コンピュータの中で計算ができるようになっているわ。」

「うん、すごいね。」
「ええ、「計算機理論入門」〜 コンピュータを設計しよう https://kouyama.sci.u-toyama.ac.jp/main/etc/2003/ssh/sshi.pdf という本があるわ。富山大学の幸山直人先生が書かれた本なの。高校生向けに書かれた本なので、みっくんには難しいところもあるかもしれないけれど、とても良く纏まっているから、良かったら読んでみてね。」
「うん、読んでみる！」

## プログラミングとは？

「じゃあ、コンピューターの仕組みも学んだし、プログラミングに入っていこうか。」
「うんうん」
「プログラミングって最近よく聞くようになったけれど、プログラミングって何のことだと思う？」
「う〜ん、なんだろう。小学校の時にプログラミングをちょっとだけやったけれど、iPadの上でブロックを動かしたりしたよ。計算をしたり、三角形を書いたりもしたよ。」
「そうなんだね。それもプログラミングだね。ブルークラウンという言葉なんだけれど、もともとたどっていくと、公示書という意味なの。よく時代劇で、立て札が建てられているのを見たりするわよね。ちょうどあんな感じよ。こういうお触れが出たから、みんな守ってねとかそういう風にみんなの前に知らせている宣言しているもの、それがプログラムの語源ね。」
「へ〜そうなんだ。」
「ええ、そして、そこから来て、予定表っていう意味になって、予定表と言えば、運動会のプログラムもそうよね。入場行進があって、かけっこがあって、玉入れがあって、最後に表彰式がある。そういう予定だよね。」
「うん、そうだね。かけっこは得意だったよ！」
「みっくん、足速かったものね。コンピュータのプログラムも同じ意味で、あれをやって、これをやって、最後にこれをやると言う、手順の予定表のことなの。」


「そして、みっくんの初めてのプログラムって言うと、iPadの上でブロックを動かしたりして、計算したり三角形を書いたのが最初だよね。」
「うん、そうだった。」
「で、最初にコンピュータが登場した頃はどういう風にやっていたかって言うと、さっきコンピュータはAND回路OR回路NOT回路の組み合わせで計算できるんだよって話したけれど、その回路同士を直接配線でつなぐことによってプログラムしていったんだ。」
「へー、そうなんだ。」
「ええ、だから違う計算しようと思ったら、線を抜き差しして配線を組み替えていたんだ。」
「とっても大変そうだね。」
「ええ、なので、コンピュータ自身にこれからどのような計算をするのか、覚えさせたらいいと閃いた人がいたの。ノイマンと言うアメリカの科学者なんだけれども、すごい発明だよね。今日のコンピュータの基礎となっているよ。MacやiPhoneにいろいろなアプリを入れると、その通りに動いてくれるわよね。このボタンを押したら、こういう計算をして、こういうふうに画面に表示するって、手順が書かれているの。」
「コンピュータに対するいろんな指示を与えるのがプログラミングね。最近では小学生でもできるようにって、みっくんがやったようにiPadの上でいろいろ動かして操作をするプログラミングもあるわ。」
「うん、ちっちゃい子にはいいかもしれない。でも飽きちゃった。」
「ええ、そうね。小さい子にはいいけれど、画面のブロックを動かすだけだから、あまり難しいことできないから飽きちゃうかもね。」
「昔々は穿孔テープと言って穴が開いたテープを読み込ませていたの。長い紙の所々に穴が開いていて、空いているところと空いていないところが０と１に対応していたの。そして読み取り終わってしばらくするとまた結果が、紙に穴が空けられてかえってくるので、これを読み取っていたの。」
「キーボードが登場したのはそのあとよ。キーボードからタイプするようになって、計算結果も画面に表示されるようになったわ。これから学んでいくプログラミングと一緒ね。」

「コンピュータへの指示書がプログラミングなんだけれど、指示を与えるのに様々な言語があるわ。あたしたちがいつも話しているのは国語だけれど、他にどんな言語がある？」
「英語かな。」
「ええ、そうだね。英語もあるね。英語があるんだったらドイツ語もあるしフランス語もあるわよね。そんなふうに人の話す言葉はいろんな言葉があるわ。」
「同じようにコンピュータに指示を与える言語のことをプログラミング言語というのだけれど、これにもいろんな言語があるわ。一番古い言語はアセンブラと呼ばれる言語で、メモリの5番地を読み込め、読み込んだ数値に3を足せなど、コンピュータがそのまま理解できる機械語とほとんど対応するような形で書いていたの。これはとても大変なの。もう少し簡単にプログラムが書けたらいいわと言う願いがあって、人にとってわかりやすい言語を、機械が分かる機械語に翻訳させれば良いと言う発想が生まれたわ。この翻訳作業を行うプログラムのことを「コンパイラ（翻訳者）」というわ。」
「そうなんだね。で、人にとってわかりやすい言語ってどんなものなの？」
「ええ、人にとって分かりやすい言語といっても、あたしたちが普段話してるような言葉は当時のコンピューターにとっては難しすぎたわ。そこでもう少し文法や語彙を制限してコンピュータに理解しやすくした言語が作られたわ。最初に登場したのが、科学技術用に生み出されたFORTRAN(フォートラン)と呼ばれる言語。formula translation（数式の変換）が由来よ。プログラミングに数式が使える事は当たり前だけれど、さまざまな数値計算を行うための式が描けるようになったことはとっても画期的だったの。」
「そうなんだ〜。」
「ええ、なので、コンピュータを使った研究が大いに進むこととなったわ。」

「それから事務処理用に開発されたのが、COBOL(コボル)。Common Business Oriented Language が由来よ。定型的な英文を使って書くようになっていて、普通の事務員さんがプログラムにできるようにと考案されたわ。今ではあまり人気がなくなっているけれども、昔作られたプログラムが今でも動いていてるわ。」
「そうなんだね。」
「ええ、そしてこれらのもう少し後から登場したのがC言語。みっくんが使っているMacのようなOS(オペレーティングシステム)を開発するために作られた言語よ。家電など組み込みと呼ばれる小さなマイコンで使われたりなど、今でも多くのところで大活躍している言語よ。」
「そうなんだね。」
「ええ、そして、今から30年位前かしら。Ruby(ルビー)が誕生したの。まつもとゆきひろさんと言う人が作ったプログラミング言語よ。簡潔で分かりやすくて柔軟性に富んでいて、大人気のプログラミング言語よ。」
